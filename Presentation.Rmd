---
title: "Urban Terror"
author: 'Lukas Bretzinger, Cameron Reed, Sascha Schuster'
date: "Thursday, December 04, 2014"
output: 
  ioslides_presentation:
    logo: logo.png
bibliography: UTBiblio.bib
---

```{r, echo=FALSE, message=FALSE, warning=FALSE}
PreGTD <- read.csv("TerrorData/Pregtd.csv")
source("0 - Loading Packages.R")

```
## Origins

<div class="centered">
![@Kilcullen2013](http://ecx.images-amazon.com/images/I/519z2RHlGQL.jpg)
![@Cutter2003](http://img2.imagesbn.com/p/9780415946421_p0_v1_s260x420.jpg)
</div>

## Research Question {.flexbox .vcenter}


<div class="centered">
### **Do Terrorists target urban environments more now than in past days?**
</div>

# Data Collection

## Main Database | ![@START2013](http://www.start.umd.edu/gtd/images/logo-gtd.gif)

> - [Open Source Database](http://www.start.umd.edu/gtd/) run by University of Maryland
> - contains more than 120,000 observations on over 120 variables between 1970 and 2013
> - detailed description of target and effect of attack
> - a lot of information is missing
> - improvable data quality

> ...The GTD is a powerful database!

-----

```{r, echo=FALSE, message=FALSE, warning=FALSE}
qplot(factor(iyear), data=PreGTD, geom = "freqpoly",color = region_txt, group = region_txt, ylab= NULL, xlab= NULL,
)
```
**Figure 1:** attacks per year in all world regions

-----

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# Preparing the intersections where collecting agencies changed 
intersepz <- data.frame(date=as.numeric(c("27", "38", "41")), 
                       date2=as.numeric(c("1997", "2009", "2011")), 
                       event=c("PGIS Data Collection End", "CETIS Data Collection End", "ISVG Data Collection End"))

qplot(factor(iyear), data=PreGTD, geom = "freqpoly",color = region_txt, group = region_txt, ylab= NULL, xlab= NULL,
) + geom_vline(data=intersepz, mapping=aes(xintercept=date)) + theme(axis.text.x = element_text(angle = 90), complete = FALSE, legend.position = "none")
```
**Figure 2:** attacks per year in all world regions, indicating transition of collectors: 
 PIGS - 1997, CETIS - 2008, ISVG - 2011, START since 2011
 
-----

```{r, echo=FALSE, message=FALSE, warning=FALSE}
qplot(factor(iyear), data=PreGTD, geom = "freqpoly",color = TUPscale, group = TUPscale, ylab= NULL, xlab= NULL,
) + theme(axis.text.x = element_text(angle = 90), complete = FALSE)
```
**Figure 3:** attacks per year on targets of different urbanity

## Main Database | ![@START2013](http://www.start.umd.edu/gtd/images/logo-gtd.gif)

The GTD is a powerful tool on itself, but to answer our research question, we lack important information:

> * Environments 
      * Location 
      * Urbanity  
      * Population

## Additional Databases

> * City level data
    + [world.cities2009](http://CRAN.R-project.org/package=maps) 
    + [World Cities2013](http://download.maxmind.com/download/geoip/database/LICENSE_WC.txt) 
    + [Urban Centers](http://en.wikipedia.org/wiki/List_of_urban_areas_by_population)
> * Country level data
    + [World Development Indicators](http://data.worldbank.org/data-catalog/world-development-indicators)
    + [Correlates of War](http://www.correlatesofwar.org/)


# Data Cleaning

## Challenges
Within single and across datasets

+---------------+----------------+-----------------------+--------------+
| Issue         | Example        | Detail                | Solution     |
+===============+================+=======================+==============+
| Inconsistency | Spellings      | - "Congo, Kinshasa"   | - RegEx      |
|               |                | - "Congo, Dem. Rep."  | - Hand Coding|
+---------------+----------------+-----------------------+--------------+
| Quality       | Typos          | - "Agfhanistan" vs.   | - RegEx      |
|               |                |                       | - Hand Coding|
|               | Errors         |  "Arabistan"          |              |
+---------------+----------------+-----------------------+--------------+
| Bias          | Underreportings| - Soviet Union: 67 vs.| - Control    |
|               |                |   Russia: >1200       | Variables    |
|               | Definitions    | - Iraq since 2003 vs. |              |
|               |                |   Afghanistan 79-89   |              |
+---------------+----------------+-----------------------+--------------+


## Hand Coding

  * Adjusting City and Country Names
    `````
    X<-gsub("^Teberan","Tehran", X, ignore.case=TRUE)
    X<-gsub("^Teheran","Tehran", X, ignore.case=TRUE)
    X<-gsub("^Teherau","Tehran", X, ignore.case=TRUE)
    X<-gsub("^Tehram","Tehran", X, ignore.case=TRUE)
    `````
* "Reassigning" Cities to Countries

    `````
    GTD$country_txt[GTD$country_txt == "Soviet Union" &
                    GTD$city =="Osh" ] <- "Kyrgyzstan"
    GTD$country_txt[GTD$country_txt == "Soviet Union" &
                    GTD$city =="Riga" ] <- "Latvia"
    GTD$country_txt[GTD$country_txt == "Yugoslavia" &
                    GTD$city =="Bogicevica" ] <- "Albania"
    GTD$country_txt[GTD$country_txt == "Yugoslavia" &
                    GTD$city =="Banjica" ] <- "Serbia"
    `````

# Data Manipulating

## Filling In

* Geo Reference
* Urban Reference

## New Information

* Coastal Megacities
* Relative City Size
* Cities' Rank Size

## Extrapolation

* Population in the past

# Data Analysis

## Approach

## test leftover



Target Type
    Human Damage
    Property Damage
    


## References